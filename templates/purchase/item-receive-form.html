<form name="ReceiveItem" action="/purchase/receive-item/{{item_id}}/" method="POST" enctype="multipart/form-data">{% csrf_token %}
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h4 class="modal-title" id="myModalLabel">Receive Item</h4>
</div>


<div class="modal-body">
	<input type="hidden" name="item_po" value="{{item_po}}">
	<input type="hidden" name="purchase_item" value="{{purchase_item}}">
	<table class="add-user-table">
		<tr>
			<td><label for="id_qty_received">Qty received:</label></td>
			<td><input class="form-control decimal" id="id_qty_received" max="{{order_restriction}}" name="qty_received" ng-model="qty" placeholder="qty received" step="0.01" type="number"></td>
		</tr>
		<tr>
			<td><label for="id_comment">Comment:</label></td>
			<td><textarea class="form-control" cols="40" id="id_comment" name="comment" placeholder="Comments" rows="2"></textarea></td>
		</tr>
	</table>
</div>



<div class="modal-footer">
    <button type="button" class="btn btn-default close-modal" data-dismiss="modal">Close</button>
    <button type="submit" class="btn btn-primary">Add Item</button>
</div>
</form>
<script type="text/javascript">
(function(){
	$("form[name='ReceiveItem']").on("submit", function(e){
		e.preventDefault();
		form_data = $(this).serialize();
		console.log(form_data);
		$.ajax({
			type: "POST",
			url: $(this).attr('action'),
			data: form_data,
			success: function(rdata) {
                $( "button.close-modal" ).trigger( "click" );
                window.location.reload(false);
                // win = window.open("",'_blank');
                // win.location.href = "/contacts/edit/" + rdata + "/";

            }
		});

	})
})(jQuery)
</script>
    
